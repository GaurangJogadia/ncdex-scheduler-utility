[2025-10-01T05:39:30.793Z] [INFO] Starting task: SugarImportCasesToPortalCases {"taskName":"SugarImportCasesToPortalCases","module":"Cases","sugarcrmModule":"Cases"}
[2025-10-01T05:39:30.844Z] [INFO] Last sync date found for module 'Cases' {"moduleName":"Cases","lastSyncDate":"2025-09-29T12:55:48.661Z","syncRecord":{"module_name":"Cases","integration_name":"SugarCRM Cases to Portal Cases","direction":"inbound","last_sync_at":"2025-09-29T12:55:48.661Z","updated_at":"2025-09-29T12:55:48.662Z","status":"success","metadata":{"records_fetched":3,"sugarcrm_module":"Cases","sync_duration":"2025-09-29T12:55:48.661Z","last_sync_date_used":"2025-01-29T12:50:58.451Z"}}}
[2025-10-01T05:39:30.848Z] [DEBUG] API Call: POST http://49.248.8.140:5598/ncdexdev1302/rest/v11_20/Cases {"method":"POST","url":"http://49.248.8.140:5598/ncdexdev1302/rest/v11_20/Cases","module":"Cases","filters":[{"date_modified":{"$gte":"2025-09-29T12:55:48.661Z"}},{"isimport_c":{"$equals":"0"}}],"fields":["id","name","case_number","account_id","type","sub_type","description","audit_due_date_c","aud_auditor_id_c","stage_c","auditor_visit_status_c","member_visit_status_c","auditor_latitude_c","auditor_longitude_c","member_latitude_c","member_longitude_c","comments_c","rejection_type_c"],"maxResults":50}
[2025-10-01T05:39:31.622Z] [INFO] SugarCRM records fetched successfully {"module":"Cases","totalFetched":4,"recordsCount":4}
[2025-10-01T05:39:32.401Z] [INFO] Portal authentication successful {"portalUrl":"http://localhost:3001","tokenLength":552}
[2025-10-01T05:39:32.425Z] [DEBUG] API Call: POST http://localhost:3001/api/integration/SugarCasesToPortalCases {"method":"POST","url":"http://localhost:3001/api/integration/SugarCasesToPortalCases","recordCount":4,"endpoint":"api/integration/SugarCasesToPortalCases","moduleName":"Cases","totalRecords":4,"syncType":"cases_to_portal_cases"}
[2025-10-01T05:39:32.590Z] [INFO] Integration log saved to database {"logId":"303","logType":"Error","moduleName":"Cases","sugarId":"a7fe0f4a-9d39-11f0-8ce2-00155d64162c","portalId":null,"httpStatus":400,"internalStatus":"ValidationFailed"}
[2025-10-01T05:39:32.610Z] [INFO] Integration log saved to database {"logId":"304","logType":"Error","moduleName":"Cases","sugarId":"10c4bbd2-9dcb-11f0-a92c-00155d64162c","portalId":null,"httpStatus":400,"internalStatus":"ValidationFailed"}
[2025-10-01T05:39:32.625Z] [INFO] Integration log saved to database {"logId":"305","logType":"Error","moduleName":"Cases","sugarId":"181434fe-9dde-11f0-8aef-00155d64162c","portalId":null,"httpStatus":400,"internalStatus":"ValidationFailed"}
[2025-10-01T05:39:32.641Z] [INFO] Integration log saved to database {"logId":"306","logType":"Error","moduleName":"Cases","sugarId":"dbe6e30e-9d39-11f0-8add-00155d64162c","portalId":null,"httpStatus":400,"internalStatus":"ValidationFailed"}
[2025-10-01T05:39:32.642Z] [INFO] Data Processing: Portal Cases sync completed {"operation":"Portal Cases sync completed","data":{"totalRecords":4,"responseData":[{"logType":"Error","moduleName":"Cases","sugarId":"a7fe0f4a-9d39-11f0-8ce2-00155d64162c","portalId":null,"httpStatus":400,"internalStatus":"ValidationFailed","message":"Validation errors occurred while syncing case","validationErrors":[{"field":"case_number","error":"Expected string, received number"},{"field":"sub_type","error":"Expected string, received null"}]},{"logType":"Error","moduleName":"Cases","sugarId":"10c4bbd2-9dcb-11f0-a92c-00155d64162c","portalId":null,"httpStatus":400,"internalStatus":"ValidationFailed","message":"Validation errors occurred while syncing case","validationErrors":[{"field":"case_number","error":"Expected string, received number"},{"field":"sub_type","error":"Expected string, received null"}]},{"logType":"Error","moduleName":"Cases","sugarId":"181434fe-9dde-11f0-8aef-00155d64162c","portalId":null,"httpStatus":400,"internalStatus":"ValidationFailed","message":"Validation errors occurred while syncing case","validationErrors":[{"field":"case_number","error":"Expected string, received number"},{"field":"sub_type","error":"Expected string, received null"}]},{"logType":"Error","moduleName":"Cases","sugarId":"dbe6e30e-9d39-11f0-8add-00155d64162c","portalId":null,"httpStatus":400,"internalStatus":"ValidationFailed","message":"Validation errors occurred while syncing case","validationErrors":[{"field":"case_number","error":"Expected string, received number"},{"field":"sub_type","error":"Expected string, received null"}]}]}}
[2025-10-01T05:39:32.647Z] [INFO] Portal Cases sync completed {"totalRecords":4,"statusCounts":{"ValidationFailed":4},"portalResponse":[{"logType":"Error","moduleName":"Cases","sugarId":"a7fe0f4a-9d39-11f0-8ce2-00155d64162c","portalId":null,"httpStatus":400,"internalStatus":"ValidationFailed","message":"Validation errors occurred while syncing case","validationErrors":[{"field":"case_number","error":"Expected string, received number"},{"field":"sub_type","error":"Expected string, received null"}]},{"logType":"Error","moduleName":"Cases","sugarId":"10c4bbd2-9dcb-11f0-a92c-00155d64162c","portalId":null,"httpStatus":400,"internalStatus":"ValidationFailed","message":"Validation errors occurred while syncing case","validationErrors":[{"field":"case_number","error":"Expected string, received number"},{"field":"sub_type","error":"Expected string, received null"}]},{"logType":"Error","moduleName":"Cases","sugarId":"181434fe-9dde-11f0-8aef-00155d64162c","portalId":null,"httpStatus":400,"internalStatus":"ValidationFailed","message":"Validation errors occurred while syncing case","validationErrors":[{"field":"case_number","error":"Expected string, received number"},{"field":"sub_type","error":"Expected string, received null"}]},{"logType":"Error","moduleName":"Cases","sugarId":"dbe6e30e-9d39-11f0-8add-00155d64162c","portalId":null,"httpStatus":400,"internalStatus":"ValidationFailed","message":"Validation errors occurred while syncing case","validationErrors":[{"field":"case_number","error":"Expected string, received number"},{"field":"sub_type","error":"Expected string, received null"}]}]}
[2025-10-01T05:39:32.650Z] [INFO] Task completed: SugarImportCasesToPortalCases {"taskName":"SugarImportCasesToPortalCases","module":"Cases","recordsProcessed":4,"duration":0}
[2025-10-01T07:00:47.490Z] [INFO] Starting task: SugarImportCasesToPortalCases {"taskName":"SugarImportCasesToPortalCases","module":"Cases","sugarcrmModule":"Cases"}
[2025-10-01T07:00:47.521Z] [INFO] Last sync date found for module 'Cases' {"moduleName":"Cases","lastSyncDate":"2025-10-01T05:39:32.647Z","syncRecord":{"module_name":"Cases","integration_name":"SugarCRM Cases to Portal Cases","direction":"inbound","last_sync_at":"2025-10-01T05:39:32.647Z","updated_at":"2025-10-01T05:39:32.648Z","status":"success","metadata":{"records_fetched":4,"sugarcrm_module":"Cases","sync_duration":"2025-10-01T05:39:32.647Z","last_sync_date_used":"2025-09-29T12:55:48.661Z"}}}
[2025-10-01T07:00:47.523Z] [DEBUG] API Call: POST http://49.248.8.140:5598/ncdexdev1302/rest/v11_20/Cases {"method":"POST","url":"http://49.248.8.140:5598/ncdexdev1302/rest/v11_20/Cases","module":"Cases","filters":[{"date_modified":{"$gte":"2025-10-01T05:39:32.647Z"}},{"isimport_c":{"$equals":"0"}}],"fields":["id","name","case_number","account_id","type","sub_type","description","audit_due_date_c","aud_auditor_id_c","stage_c","auditor_visit_status_c","member_visit_status_c","auditor_latitude_c","auditor_longitude_c","member_latitude_c","member_longitude_c","comments_c","rejection_type_c"],"maxResults":50}
[2025-10-01T07:00:48.733Z] [INFO] SugarCRM records fetched successfully {"module":"Cases","totalFetched":1,"recordsCount":1}
[2025-10-01T07:00:49.258Z] [ERROR] Portal authentication failed {"portalUrl":"http://localhost:3001","error":"fetch failed"}
[2025-10-01T07:00:49.415Z] [INFO] Integration log saved to database {"logId":"307","logType":"Error","moduleName":"Cases","sugarId":null,"portalId":null,"httpStatus":0,"internalStatus":"Failed"}
[2025-10-01T07:00:49.418Z] [ERROR] Task failed: SugarImportCasesToPortalCases - [object Object] {"taskName":"SugarImportCasesToPortalCases","error":{"module":"Cases","error":"Portal API call failed: fetch failed","stack":"Error: Portal API call failed: fetch failed\n    at syncToPortalCases (file:///D:/Work/Projects/NCDEX/ncdex-scheduler-utility/tasks/SugarImportCasesToPortalCases.js:311:19)\n    at async Module.SugarImportCasesToPortalCases (file:///D:/Work/Projects/NCDEX/ncdex-scheduler-utility/tasks/SugarImportCasesToPortalCases.js:129:36)\n    at async executeTask (file:///D:/Work/Projects/NCDEX/ncdex-scheduler-utility/index.js:93:9)\n    at async main (file:///D:/Work/Projects/NCDEX/ncdex-scheduler-utility/index.js:29:9)"}}
